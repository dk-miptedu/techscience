---
jupyter:
  jupytext:
    formats: ipynb,md
    text_representation:
      extension: .md
      format_name: markdown
      format_version: '1.3'
      jupytext_version: 1.15.2
  kernelspec:
    display_name: Python 3 (ipykernel)
    language: python
    name: python3
---

<!-- #region id="o-YllQwWHnQK" -->
# Статистика вывода
<!-- #endregion -->

<!-- #region id="QyjXhLbtHs-7" -->
## Расчет размера выборки
<!-- #endregion -->

<!-- #region id="RiA26fxiH76S" -->
**Генеральная совокупность (N)** — это весь набор объектов, о которых мы хотим получить информацию.

**Выборка (n)** — подмножество объектов из генеральной совокупности.
<!-- #endregion -->

<!-- #region id="aJ954RZIIQjC" -->
Задача: определить размер выборки для исследования с доверительным уровнем в 95% и ошибкой не более 4%.
<!-- #endregion -->

```python colab={"base_uri": "https://localhost:8080/"} id="jyL2pwrHHkqz" executionInfo={"status": "ok", "timestamp": 1687152532766, "user_tz": -420, "elapsed": 662, "user": {"displayName": "\u041d\u0430\u0434\u0435\u0436\u0434\u0430 \u0422\u0443\u043f\u0438\u043a\u0438\u043d\u0430", "userId": "16854253095026240007"}} outputId="b8127cb5-30dc-452c-b01f-df1dc358fd2c"
import scipy.stats as st
conf = 0.95 #доверительный уровень в долях
Z = st.norm.ppf(conf + (1-conf)/2)
p = 0.5
q = 1 - p
delta = 0.04 #ошибка в долях

round(((Z**2)*p*q)/delta**2)

```

<!-- #region id="5JpjtdTVIdmS" -->
## Доверительный интервал
<!-- #endregion -->

<!-- #region id="HWgxPgKUIl_K" -->
**Доверительный интервал** — это такой интервал,	 который покрывает неизвестный параметр с заданной надежностью. Чем меньше выборка, тем в большей степени доверительный интервал предпочтительнее точечной оценки.

**Надежность** — вероятность того, что оценка параметра принадлежит доверительному интервалу. Часто также используют термин **статистическая значимость**, которая определяется как (1 — надежность).


<!-- #endregion -->

```python id="qIonKsI6IoDj"
import numpy as np

data = [187, 185, 165, 145, 152, 168, 172, 179, 180, 195, 168, 168, 170, 172, 160]
```

```python colab={"base_uri": "https://localhost:8080/"} id="fos9yhEGIwmC" executionInfo={"status": "ok", "timestamp": 1687152798758, "user_tz": -420, "elapsed": 252, "user": {"displayName": "\u041d\u0430\u0434\u0435\u0436\u0434\u0430 \u0422\u0443\u043f\u0438\u043a\u0438\u043d\u0430", "userId": "16854253095026240007"}} outputId="8da50249-1370-42fd-8e27-d62018460087"
#90% надежность
print(st.t.interval(confidence=0.90, df=len(data)-1,  loc=np.mean(data), scale=st.sem(data)))
```

```python colab={"base_uri": "https://localhost:8080/"} id="hyVLdJovIwrq" executionInfo={"status": "ok", "timestamp": 1687152810289, "user_tz": -420, "elapsed": 285, "user": {"displayName": "\u041d\u0430\u0434\u0435\u0436\u0434\u0430 \u0422\u0443\u043f\u0438\u043a\u0438\u043d\u0430", "userId": "16854253095026240007"}} outputId="7cb71560-adf5-41a4-f7ef-0b6ab0a8e030"
#95% надежность
print(st.t.interval(confidence=0.95, df=len(data)-1, loc=np.mean(data), scale=st.sem(data)))

```

```python colab={"base_uri": "https://localhost:8080/"} id="QMZLCzqHIwyU" executionInfo={"status": "ok", "timestamp": 1687152808865, "user_tz": -420, "elapsed": 4, "user": {"displayName": "\u041d\u0430\u0434\u0435\u0436\u0434\u0430 \u0422\u0443\u043f\u0438\u043a\u0438\u043d\u0430", "userId": "16854253095026240007"}} outputId="f3df2907-c19a-4a17-ea80-afa0fe479dc5"
#99% надежность
print(st.t.interval(confidence=0.99, df=len(data)-1, loc=np.mean(data), scale=st.sem(data)))
```

<!-- #region id="dps9aPdPJT2a" -->
Доверительный интервал для доли:
<!-- #endregion -->

```python colab={"base_uri": "https://localhost:8080/"} id="v3s1zDFZJVUq" executionInfo={"status": "ok", "timestamp": 1687152874037, "user_tz": -420, "elapsed": 658, "user": {"displayName": "\u041d\u0430\u0434\u0435\u0436\u0434\u0430 \u0422\u0443\u043f\u0438\u043a\u0438\u043d\u0430", "userId": "16854253095026240007"}} outputId="89c7f1e5-0e85-4fe1-8e1f-878f9b996e33"
from statsmodels.stats.proportion import proportion_confint

proportion_confint(93, 150, alpha=(1 - 0.95))
```
